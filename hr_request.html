<!doctype html><html lang="ar" dir="rtl"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script src="https://unpkg.com/html5-qrcode@2.3.8/minified/html5-qrcode.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <style>html,body{font-family:"Cairo",ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,"Noto Sans",sans-serif}</style>
<title>طلب مستندات HR</title></head>
<body class="min-h-screen bg-gray-50"><div id="toast-holder" class="fixed top-4 right-4 z-50"></div>
<nav class="bg-white shadow-sm"><div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between"><div class="flex items-center gap-3"><h1 class="text-sm font-bold" data-company-ar></h1></div><div class="flex items-center gap-4 text-sm"><a href="employee_home.html" class="text-blue-700">الرجوع</a></div></div></nav>
<main class="max-w-4xl mx-auto p-4"><h2 class="text-xl font-bold mb-4">طلب مستندات HR</h2>
<form id="hrForm" class="bg-white rounded-2xl shadow p-4 grid grid-cols-1 md:grid-cols-2 gap-4">
  <div class="md:col-span-2">
    <label class="text-sm font-bold mb-2 block">اختر المستندات المطلوبة</label>
    <div class="grid sm:grid-cols-2 gap-2">
      <label class="inline-flex items-center gap-2"><input type="checkbox" value="Insurance Card"><span>Insurance Card</span></label>
      <label class="inline-flex items-center gap-2"><input type="checkbox" value="ID Card"><span>ID Card</span></label>
      <label class="inline-flex items-center gap-2"><input type="checkbox" value="Employment Certificate"><span>Employment Certificate</span></label>
      <label class="inline-flex items-center gap-2"><input type="checkbox" value="Salary Certificate"><span>Salary Certificate</span></label>
      <label class="inline-flex items-center gap-2"><input type="checkbox" value="Salary Transfer Letter"><span>Salary Transfer Letter</span></label>
      <label class="inline-flex items-center gap-2"><input type="checkbox" value="Salary Pay Slip"><span>Salary Pay Slip</span></label>
      <label class="inline-flex items-center gap-2"><input type="checkbox" value="Experience Certificate"><span>Experience Certificate</span></label>
      <label class="inline-flex items-center gap-2"><input type="checkbox" value="Others"><span>Others</span></label>
    </div>
  </div>
  <div class="md:col-span-2"><label class="text-sm">اذكر مستندات أخرى (إن وُجدت)</label><input id="others" class="w-full border rounded-lg px-3 py-2"></div>
  <div><label class="text-sm">موجّه إلى</label><input id="addressed_to" class="w-full border rounded-lg px-3 py-2"></div>
  <div><label class="text-sm">الغرض</label><input id="purpose" class="w-full border rounded-lg px-3 py-2"></div>
  <div class="md:col-span-2"><button class="w-full bg-green-600 text-white rounded-lg py-2">إرسال الطلب</button></div>
</form></main>
<script type="module">
  import { requireAuth } from './js/auth.js'; import { toast, setCompanyBranding } from './js/ui.js'; import { submitHRRequest } from './js/api.js';
  setCompanyBranding(); const ctx = await requireAuth(['employee','supervisor']);
  document.getElementById('hrForm').addEventListener('submit', async (e)=>{ e.preventDefault();
    const checks = Array.from(document.querySelectorAll('input[type=checkbox]:checked')).map(x=>x.value);
    const payload = { docs: checks, others: document.getElementById('others').value.trim()||null, addressed_to: document.getElementById('addressed_to').value.trim()||null, purpose: document.getElementById('purpose').value.trim()||null };
    try{ await submitHRRequest(payload); toast('تم إرسال الطلب'); e.target.reset(); } catch(err){ toast('فشل الإرسال: '+err.message,'error'); }
  });
</script></body></html>